<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Eslint and pm2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/22/Eslint%20and%20pm2/" class="article-date">
  <time class="dt-published" datetime="2021-06-22T14:36:14.118Z" itemprop="datePublished">2021-06-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/22/Eslint%20and%20pm2/">Eslint and pm2</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="前端工程化之代码规范化及前端自动化pm2"><a href="#前端工程化之代码规范化及前端自动化pm2" class="headerlink" title="前端工程化之代码规范化及前端自动化pm2"></a>前端工程化之代码规范化及前端自动化pm2</h2><h3 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">官网:</span><br><span class="line">	https:&#x2F;&#x2F;eslint.org&#x2F;</span><br><span class="line"></span><br><span class="line">中文网址:</span><br><span class="line">	http:&#x2F;&#x2F;eslint.cn&#x2F;</span><br><span class="line"></span><br><span class="line">基本概念:</span><br><span class="line">	javascript代码检测工具，帮助我们统一团队的代码风格</span><br><span class="line">	</span><br><span class="line">优势:</span><br><span class="line">	1、内置很多检查规则，同时支持自定义规则</span><br><span class="line">	</span><br><span class="line">	2、NodeJS开发的，方便安装</span><br><span class="line">	</span><br><span class="line">可配置的信息:</span><br><span class="line">	Environments - 指定脚本的运行环境。每种环境都有一组特定的预定义全局变量。</span><br><span class="line">	Globals - 脚本在执行期间访问的额外的全局变量。</span><br><span class="line">	Rules - 启用的规则及其各自的错误级别。</span><br><span class="line">	...</span><br><span class="line">	</span><br><span class="line">使用步骤:</span><br><span class="line">	参考:http:&#x2F;&#x2F;eslint.cn&#x2F;docs&#x2F;user-guide&#x2F;getting-started</span><br><span class="line">	</span><br><span class="line">	1、安装全局 eslint 包，或是本地安装</span><br><span class="line">		npm i eslint -g</span><br><span class="line">		注意：如果执行脚本写在package.json中，可以不用全局安装，本地安装即可</span><br><span class="line">		但是如果要生成eslint的配置文件，必须安装全局包</span><br><span class="line">	</span><br><span class="line">	2、在项目根目录创建一个eslint的配置文件，并且进行配置</span><br><span class="line">		使用 &#96;eslint --init&#96; 在项目根目录下创建一个 .eslintrc.js 的配置文件</span><br><span class="line">		</span><br><span class="line">		配置详见:http:&#x2F;&#x2F;eslint.cn&#x2F;docs&#x2F;user-guide&#x2F;configuring</span><br><span class="line">		</span><br><span class="line">	3、在项目根目录创建.eslintignore 忽略掉不需要lint的目录</span><br><span class="line">		</span><br><span class="line">	4、安装项目依赖的包</span><br><span class="line">		npm i eslint babel-eslint -D</span><br><span class="line">		</span><br><span class="line">	5、在package.json中配置scripts来验证</span><br><span class="line">		&quot;lint&quot;:&quot;eslint src&quot;</span><br><span class="line">	</span><br><span class="line">	6、在package.json中配置scripts来修复</span><br><span class="line">		&quot;fix&quot;:&quot;eslint --fix src&quot;</span><br><span class="line">		注意:修复的只能是规则中，带有扳手标识的</span><br><span class="line">		</span><br><span class="line">	7、使用pre-commit第三方包，在提交git前，必须先验证通过</span><br><span class="line">		</span><br></pre></td></tr></table></figure>

<h4 id="ESlint-With-Webpack【以Vue为例】"><a href="#ESlint-With-Webpack【以Vue为例】" class="headerlink" title="ESlint With Webpack【以Vue为例】"></a>ESlint With Webpack【以Vue为例】</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">方式1：</span><br><span class="line">	使用vue的脚手架，直接生成项目，即可完成eslint的配置</span><br><span class="line">		vue init webpack vue_project</span><br><span class="line">		</span><br><span class="line">方式2：</span><br><span class="line">	自己手工搭建Webpack + Vue的项目，然后自己手动的配置eslint</span><br><span class="line">	</span><br><span class="line">	步骤:</span><br><span class="line">		1、切换到项目根目录，使用 &#96;eslint --init&#96; 生成eslint的配置文件</span><br><span class="line">		</span><br><span class="line">		2、安装依赖包，然后在.eslintrc.js配置文件中增加对vue的支持</span><br><span class="line">			npm i eslint babel-eslint eslint-loader eslint-config-standard eslint-plugin-html -D</span><br><span class="line">			</span><br><span class="line">		3、在webpack开发阶段的配置文件中，进行配置</span><br><span class="line">			参考:https:&#x2F;&#x2F;www.npmjs.com&#x2F;package&#x2F;eslint-loader</span><br><span class="line">            &#123;</span><br><span class="line">                test: &#x2F;\.js$&#x2F;,</span><br><span class="line">                exclude: &#x2F;node_modules&#x2F;,</span><br><span class="line">                loader: &quot;eslint-loader&quot;,</span><br><span class="line">                options: &#123;</span><br><span class="line">                &#x2F;&#x2F; eslint options (if necessary)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">         4、在package.json中增加eslint的script 配置</span><br><span class="line">         	&quot;lint&quot;:&quot;eslint --fix src --ext .js,.vue&quot;</span><br><span class="line">         	</span><br><span class="line">         5、别忘加在项目根目录加上.eslintignore的忽略文件，并写好要忽略掉的目录</span><br><span class="line">         	</span><br></pre></td></tr></table></figure>

<h3 id="StyleLint"><a href="#StyleLint" class="headerlink" title="StyleLint"></a>StyleLint</h3><h4 id="基本概念-1"><a href="#基本概念-1" class="headerlink" title="基本概念"></a>基本概念</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">官网:</span><br><span class="line">	https:<span class="comment">//stylelint.io/</span></span><br><span class="line"></span><br><span class="line">基本概念:</span><br><span class="line">    A mighty, modern CSS linter and fixer that helps you avoid errors and enforce       	consistent conventions <span class="keyword">in</span> your stylesheets.</span><br><span class="line">    一款强大的，时髦的css语法检查和纠错工具，它可以帮助开发者在编写样式文件时避免错误，同时它还可以强迫	   开发者们形成统一的开发规范。</span><br><span class="line"></span><br><span class="line">基本使用:</span><br><span class="line">	<span class="number">1</span>、安装所需要的包 stylelint stylelint-config-standard</span><br><span class="line">		npm i stylelint stylelint-config-standard -D</span><br><span class="line"></span><br><span class="line">	<span class="number">2</span>、在package.json中进行配置 stylelint 项目</span><br><span class="line">    	<span class="string">&quot;stylelint&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;stylelint-config-standard&quot;</span>, </span><br><span class="line">            <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">                <span class="string">&quot;规则名称1&quot;</span>:<span class="string">&quot;规则值1&quot;</span>,</span><br><span class="line">                <span class="string">&quot;规则名称2&quot;</span>:<span class="string">&quot;规则值2&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">	<span class="number">3</span>、写好要测试的样式文件 xxx.css xxx.less xxx.scss</span><br><span class="line">		例如：在src的css文件夹创建样式文件</span><br><span class="line">		</span><br><span class="line">	<span class="number">4</span>、在package.json的scripts中添加 stylelint 代码检查脚本</span><br><span class="line">    	<span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">           <span class="string">&quot;stylelint&quot;</span>: <span class="string">&quot;stylelint src/css/*.* --fix&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">    <span class="number">5</span>、切换到项目根目录，运行 <span class="string">`npm run stylelint`</span>	</span><br></pre></td></tr></table></figure>

<h4 id="Stylelint-With-Webpack【以Vue为例】"><a href="#Stylelint-With-Webpack【以Vue为例】" class="headerlink" title="Stylelint With Webpack【以Vue为例】"></a>Stylelint With Webpack【以Vue为例】</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、先使用webpack + Vue 搭建好项目</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、安装所需要的包 style-loader css-loader less less-loader node-sass sass-loader stylelint stylelint-webpack-plugin stylelint-config-standard</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、在webpack的配置文件中，写好css、less、scss的loader配置</span><br><span class="line">	参考:https:<span class="comment">//webpack.docschina.org/loaders/</span></span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、在webpack的配置文件中，写好插件（stylelint-webpack-plugin）的代码</span><br><span class="line">	<span class="keyword">const</span> StyleLintPlugin = <span class="built_in">require</span>(<span class="string">&quot;stylelint-webpack-plugin&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="keyword">new</span> StyleLintPlugin(&#123;</span><br><span class="line">            context: <span class="string">&quot;src&quot;</span>,</span><br><span class="line">            configFile: path.resolve(__dirname, <span class="string">&#x27;./stylelint.config.js&#x27;</span>),</span><br><span class="line">            files: <span class="string">&#x27;css/*.*&#x27;</span>,</span><br><span class="line">            failOnError: <span class="literal">false</span>,</span><br><span class="line">            quiet: <span class="literal">true</span>,</span><br><span class="line">            fix:<span class="literal">true</span>, <span class="comment">// 修复不规范的样式代码</span></span><br><span class="line">            <span class="comment">//syntax: &#x27;less&#x27;</span></span><br><span class="line">        &#125;)</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、在项目根目录下创建一个stylelint的配置文件 stylelint.config.js 并写好配置</span><br><span class="line">	<span class="built_in">module</span>.exports = &#123;</span><br><span class="line">        <span class="string">&quot;extends&quot;</span>: <span class="string">&quot;stylelint-config-standard&quot;</span>,</span><br><span class="line">        <span class="string">&quot;rules&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;color-no-invalid-hex&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="string">&quot;规则名称1&quot;</span>:<span class="string">&quot;规则值1&quot;</span>,</span><br><span class="line">            <span class="string">&quot;规则名称2&quot;</span>:<span class="string">&quot;规则值2&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line"><span class="number">6</span>、在package.json中配置scripts脚本，启动项目</span><br><span class="line">	<span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server --progress --config webpack.config.dev.js --open --hot&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="number">7</span>、切换到根目录，运行启动脚本 <span class="string">`npm run dev`</span> 即可</span><br></pre></td></tr></table></figure>
<h3 id="PM2一键部署"><a href="#PM2一键部署" class="headerlink" title="PM2一键部署"></a><a target="_blank" rel="noopener" href="http://pm2.keymetrics.io/">PM2一键部署</a></h3><p>PM2是node进程管理工具，可以利用它来简化很多node应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，而且使用非常简单。</p>
<h4 id="好处"><a href="#好处" class="headerlink" title="好处"></a>好处</h4><ol>
<li>无需通过手工或是ftp的方式把本地代码拷贝到服务器上</li>
<li>无需手工启动或是重启远程服务器的Node服务</li>
<li>项目的升级及迭代非常方便</li>
<li>具有负载均衡功能</li>
</ol>
<h4 id="pm2"><a href="#pm2" class="headerlink" title="pm2"></a>pm2</h4><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pm2 -g</span><br></pre></td></tr></table></figure>



<h5 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 启动</span><br><span class="line">pm2 start xxx</span><br><span class="line"></span><br><span class="line"># 停止</span><br><span class="line">pm2 stop xxx</span><br><span class="line"></span><br><span class="line"># 重启</span><br><span class="line">pm2 restart xxx</span><br><span class="line"></span><br><span class="line"># 查看列表</span><br><span class="line">pm2 list</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line">其它参考:http:<span class="comment">//pm2.keymetrics.io/docs/usage/quick-start/#cheatsheet</span></span><br></pre></td></tr></table></figure>

<h4 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h4><ol>
<li><p>购买阿里云服务器，生成CentOS7.x的系统</p>
</li>
<li><p>在CentOS7.x中安装必要的软件 Node、MongoDB、Apache、MySQL、FTPServer…</p>
<p>参考:<a target="_blank" rel="noopener" href="https://github.com/Duanzihuang/linuxtutorial">https://github.com/Duanzihuang/linuxtutorial</a></p>
</li>
<li><p>本地和服务器安装pm2全局包</p>
</li>
<li><p>对阿里云服务器的安全组规则进行配置</p>
</li>
<li><p>要把代码发布到在线的Git仓库，比如Github或是码云</p>
</li>
<li><p>在自己服务器配置好Git仓库的SSH Key</p>
</li>
</ol>
<h4 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h4><ol>
<li><p>将本地代码发布到Git远程仓库(Github、码云)</p>
</li>
<li><p>在阿里云服务器(CentOS)上生成SSH Key 并且将公钥设置到Github后台，方便拉取代码到CentOS服务器</p>
<pre><code>https://help.github.com/articles/connecting-to-github-with-ssh/
   
https://help.github.com/articles/testing-your-ssh-connection/

注意：还需要在服务器上面安装 git     
  yum install -y git
</code></pre>
</li>
<li><p>在本地及服务器上面安装 pm2</p>
<p>本地/服务器安装pm2：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i pm2 -g</span><br></pre></td></tr></table></figure>
</li>
<li><p>在本地项目根目录，使用 pm2 init 生成pm2的配置文件，并且更改相应的配置</p>
<p>pm2文档地址:<a target="_blank" rel="noopener" href="https://pm2.io/doc/en/runtime/guide/ecosystem-file/">https://pm2.io/doc/en/runtime/guide/ecosystem-file/</a></p>
<p>主要更改 apps下面的 name、script 等配置项目</p>
<p>​        deploy 下面的user、host、repo、path</p>
</li>
<li><p>切换到本地项目根目录，运行 部署 指令即可</p>
<p>参考：<a target="_blank" rel="noopener" href="https://pm2.io/doc/en/runtime/guide/easy-deploy-with-ssh/">https://pm2.io/doc/en/runtime/guide/easy-deploy-with-ssh/</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm2 deploy production setup</span><br><span class="line">pm2 deploy production</span><br></pre></td></tr></table></figure>
</li>
<li><p>代码更新&amp;迭代、切换到本地项目根目录，运行 执行 指令即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pm2 deploy production update</span><br><span class="line">注意：在做这个之前，必须先把代码发布到Github</span><br></pre></td></tr></table></figure>






</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/22/Eslint%20and%20pm2/" data-id="ckq85mqrs00000gio92m2cew6" data-title="Eslint and pm2" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Jquery(1)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/06/Jquery(1)/" class="article-date">
  <time class="dt-published" datetime="2021-06-06T13:52:08.509Z" itemprop="datePublished">2021-06-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/06/Jquery(1)/">Jquery</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#Jquery</p>
<ol>
<li>了解jQuery</li>
</ol>
<ul>
<li>是什么: What?<ul>
<li>一个JS函数库: write less, do more</li>
<li>封装简化DOM操作(CRUD) / Ajax</li>
</ul>
</li>
<li>为什么用它: why?<ul>
<li>强大选择器: 方便快速查找DOM元素</li>
<li>隐式遍历(迭代): 一次操作多个元素</li>
<li>读写合一: 读数据/写数据用的是一个函数</li>
<li>链式调用: 可以通过.不断调用jQuery对象的方法</li>
<li>事件处理</li>
<li>DOM操作(CUD)</li>
<li>样式操作</li>
<li>动画</li>
<li>浏览器兼容</li>
</ul>
</li>
<li>如何使用: How?<ul>
<li>引入jQuery库<ul>
<li>本地引入与CDN远程引入</li>
<li>测试版与生产版(压缩版)</li>
</ul>
</li>
<li>使用jQuery<ul>
<li>使用jQuery函数: $/jQuery</li>
<li>使用jQuery对象: $xxx(执行$()得到的)</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>jQuery的2把利器</li>
</ol>
<ul>
<li>jQuery函数: $/jQuery<ul>
<li>jQuery向外暴露的就是jQuery函数, 可以直接使用</li>
<li>当成一般函数使用人: $(param)<ul>
<li>param是function: 相当于window.onload = function(文档加载完成的监听)</li>
<li>param是选择器字符串: 查找所有匹配的DOM元素, 返回包含所有DOM元素的jQuery对象</li>
<li>param是DOM元素: 将DOM元素对象包装为jQuery对象返回  $(this)</li>
<li>param是标签字符串: 创建标签DOM元素对象并包装为jQuery对象返回</li>
</ul>
</li>
<li>当成对象使用: $.xxx<ul>
<li>each(obj/arr, function(key, value){})</li>
<li>trim(str)</li>
</ul>
</li>
</ul>
</li>
<li>jQuery对象<ul>
<li>包含所有匹配的n个DOM元素的伪数组对象</li>
<li>执行$()返回的就是jQuery对象</li>
<li>基本行为:<ul>
<li>length/size(): 得到dom元素的个数</li>
<li>[index]: 得到指定下标对应的dom元素</li>
<li>each(function(index, domEle){}): 遍历所有dom元素</li>
<li>index(): 得到当前dom元素在所有兄弟中的下标</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="3">
<li>选择器</li>
</ol>
<ul>
<li>是什么?<ul>
<li>有特定语法规则(css选择器)的字符串</li>
<li>用来查找某个/些DOM元素: $(selector)</li>
</ul>
</li>
<li>分类<ul>
<li>基本<ul>
<li>#id</li>
<li>tagName/*</li>
<li>.class</li>
<li>selector1,selector2,selector3: 并集</li>
<li>selector1selector2selector3: 交集</li>
</ul>
</li>
<li>层次<ul>
<li>找子孙后代, 兄弟元素</li>
<li>selector1&gt;selector2: 子元素</li>
<li>selector1 selector2: 后代元素</li>
</ul>
</li>
<li>过滤<ul>
<li>在原有匹配元素中筛选出其中一些</li>
<li>:first</li>
<li>:last</li>
<li>:eq(index)</li>
<li>:lt</li>
<li>:gt</li>
<li>:odd</li>
<li>:even</li>
<li>:not(selector)</li>
<li>:hidden</li>
<li>:visible</li>
<li>[attrName]</li>
<li>[attrName=value]</li>
</ul>
</li>
<li>表单<ul>
<li>:input</li>
<li>:text</li>
<li>:checkbox</li>
<li>:radio</li>
<li>:checked: 选中的</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="4">
<li>属性/文本</li>
</ol>
<ul>
<li>操作标签的属性, 标签体文本</li>
<li>attr(name) / attr(name, value): 读写非布尔值的标签属性</li>
<li>prop(name) / prop(name, value): 读写布尔值的标签属性</li>
<li>removeAttr(name)/removeProp(name): 删除属性</li>
<li>addClass(classValue): 添加class</li>
<li>removeClass(classValue): 移除指定class</li>
<li>val() / val(value): 读写标签的value</li>
<li>html() / html(htmlString): 读写标签体文本</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/06/Jquery(1)/" data-id="ckpl8ytu40000voio106i34t6" data-title="Jquery" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-project" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/23/project/" class="article-date">
  <time class="dt-published" datetime="2021-05-23T13:56:21.565Z" itemprop="datePublished">2021-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/05/23/project/">前端工程化之模块化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>模块化是一种将系统分离成独立功能部分的方法，可将系统分割成独立的功能部分，严格定义模块接口、模块间具有透明性。</p>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ol>
<li>灵活架构，焦点分离</li>
<li>方便模块间组合、分解</li>
<li>方便单个模块功能调试、升级</li>
<li>多人协作互不干扰</li>
</ol>
<h2 id="发展历程"><a href="#发展历程" class="headerlink" title="发展历程"></a>发展历程</h2><ol>
<li>script标签</li>
<li>ComonJS</li>
<li>AMD</li>
<li>CMD</li>
<li>UMD</li>
<li>ES6</li>
</ol>
<h2 id="模块化要解决的问题"><a href="#模块化要解决的问题" class="headerlink" title="模块化要解决的问题"></a>模块化要解决的问题</h2><p>模块的定义、依赖和导出</p>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>Webpack <a target="_blank" rel="noopener" href="https://webpack.js.org/">https://webpack.js.org</a></p>
<p>基本概念:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Webpack 是当下最热门的前端资源模块化管理和打包工具。它可以将许多松散的模块按照依赖和规则打包成符合生产环境部署的前端资源。还可以将按需加载的模块进行代码分隔，等到实际需要的时候再异步加载。通过 loader 的转换，任何形式的资源都可以视作模块，比如 CommonJs 模块、 AMD 模块、 ES6 模块、CSS、图片、 <span class="built_in">JSON</span>、Coffeescript、 LESS 等。</span><br></pre></td></tr></table></figure>

<p>优势:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、代码拆分</span><br><span class="line"><span class="number">2</span>、Loader</span><br><span class="line"><span class="number">3</span>、智能解析</span><br><span class="line"><span class="number">4</span>、插件系统</span><br><span class="line"><span class="number">5</span>、快速运行</span><br></pre></td></tr></table></figure>

<p>实战之基本演练:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">前提:</span><br><span class="line">	安装 webpack webpack-cli 这两个全局包</span><br><span class="line">    npm i webpack webpack-cli -g</span><br><span class="line"></span><br><span class="line">打包单个js文件</span><br><span class="line">	<span class="number">1</span>、新建一个项目的入口文件entry.js并且在里面写好内容</span><br><span class="line">	</span><br><span class="line">	<span class="number">2</span>、一定要切换到项目根目录，使用 </span><br><span class="line">		webpack entry.js -o bundle.js --mode=development</span><br><span class="line">		</span><br><span class="line">	<span class="number">3</span>、在项目根目录，创建index.html，导入bundle.js文件</span><br><span class="line">	</span><br><span class="line">	<span class="number">4</span>、运行</span><br><span class="line">    </span><br><span class="line">打包具有依赖关系的两个js文件</span><br><span class="line">	<span class="number">1</span>、新建两个文件 entry.js <span class="built_in">module</span>.js ，并且在里面写好导出</span><br><span class="line">	导入的代码</span><br><span class="line">	</span><br><span class="line">	<span class="number">2</span>、一定要切换到项目根目录，使用 </span><br><span class="line">		webpack entry.js -o bundle.js --mode=development</span><br><span class="line">		</span><br><span class="line">	<span class="number">3</span>、在项目根目录，创建index.html，导入bundle.js文件</span><br><span class="line">	</span><br><span class="line">	<span class="number">4</span>、运行</span><br><span class="line">    </span><br><span class="line"> 打包非js(以后css)文件</span><br><span class="line">	<span class="number">1</span>、新建一个site.css文件，里面写上内容</span><br><span class="line">	</span><br><span class="line">	<span class="number">2</span>、一定要切换到项目根目录，使用 </span><br><span class="line">		webpack entry.js -o bundle.js --mode=development</span><br><span class="line">		</span><br><span class="line">	<span class="number">3</span>、我们需要安装两个load来打包css文件</span><br><span class="line">		npm i style-loader css-loader -D</span><br><span class="line">		</span><br><span class="line">	<span class="number">4</span>、使用style-loader &amp; css-loader 来打包css文件</span><br><span class="line">		<span class="number">4.1</span>、再导入css的时候，使用style-loader css-loader</span><br><span class="line">		<span class="number">4.2</span>、在终端里面对css结尾的文件统一处理</span><br><span class="line">        </span><br><span class="line"> webpack.config.js的使用</span><br><span class="line">	作用:简化在终端里面输入的很长的打包指令</span><br><span class="line"></span><br><span class="line">	<span class="number">1</span>、项目根目录下创建webpack.config.js</span><br><span class="line">	</span><br><span class="line">	<span class="number">2</span>、在webpack.config.js中配置</span><br><span class="line">		entry</span><br><span class="line">		output</span><br><span class="line">		loader</span><br></pre></td></tr></table></figure>

<p>实战之和VueJS结合使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">webpack + vue 构建项目【实现热更新，看到Hello Vue】</span><br><span class="line"></span><br><span class="line">#### 新建基本的文件和文件夹</span><br><span class="line">	<span class="number">1</span>、创建一个项目的根目录</span><br><span class="line">		szhmqd18</span><br><span class="line">			|--src 项目的源代码目录</span><br><span class="line">				|--main.js 项目的入口文件</span><br><span class="line">				|--App.vue 根组件【项目启动之后看到的第一个组件】</span><br><span class="line">			|--package.json 项目配置文件</span><br><span class="line">				npm init -y</span><br><span class="line">			|--webpack.config.dev.js 项目开发阶段的配置文件</span><br><span class="line"></span><br><span class="line">#### 在新建的文件中写代码</span><br><span class="line">	App.vue</span><br><span class="line">		写上hello Vue</span><br><span class="line">		</span><br><span class="line">	main.js</span><br><span class="line">		导入根组件【使用es6的语法】，渲染根组件【利用Vue】</span><br><span class="line">		</span><br><span class="line">	webpack.config.dev.js</span><br><span class="line">		entry</span><br><span class="line">		</span><br><span class="line"></span><br><span class="line">#### 利用 webpack-dev-server + html-webpack-plugin 运行我们的项目</span><br><span class="line">	webpack-dev-server【只是打包生成了bundle.js】</span><br><span class="line">		webpack-dev-server --progress --config webpack.config.dev.js --open --hot</span><br><span class="line">		</span><br><span class="line">		把上面的指令，放在package.json的scripts中</span><br><span class="line">		</span><br><span class="line">		<span class="string">&quot;dev&quot;</span>:<span class="string">&quot;webpack-dev-server --progress --config webpack.config.dev.js --open --hot&quot;</span></span><br><span class="line">		</span><br><span class="line">	html-webpack-plugin【帮我们生成index.html并且自动导入bundle.js】</span><br><span class="line">		安装包</span><br><span class="line">		</span><br><span class="line">		在 webapck.config.dev.js 中配置</span><br></pre></td></tr></table></figure>



<p>Parcel <a target="_blank" rel="noopener" href="https://parceljs.org/">https://parceljs.org/</a></p>
<p>基本概念:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">极速零配置Web应用打包工具</span><br></pre></td></tr></table></figure>

<p>优势:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、极速打包</span><br><span class="line"><span class="number">2</span>、将你所有的资源打包</span><br><span class="line"><span class="number">3</span>、自动转换</span><br><span class="line"><span class="number">4</span>、零配置代码分拆</span><br><span class="line"><span class="number">5</span>、热模块替换</span><br><span class="line"><span class="number">6</span>、友好的错误日志</span><br></pre></td></tr></table></figure>

<p>实战之基本使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、首先通过 Yarn 或者 npm 安装 Parcel </span><br><span class="line">	npm install -g parcel-bundler</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、创建一个 index.html 和 index.js 文件，并且写好代码</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、打包</span><br><span class="line">	parcel index.html</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p>实战之和VueJS结合使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、首先，我们需要安装 Vue 的依赖关系。</span><br><span class="line">	npm install --save vue</span><br><span class="line">	npm install --save-dev parcel-bundler</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、向 package.json 的 scripts 中添加 start 脚本。</span><br><span class="line">	<span class="comment">// package.json</span></span><br><span class="line">    <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;start&quot;</span>: <span class="string">&quot;parcel index.html&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<p>Rollup <a target="_blank" rel="noopener" href="https://www.rollupjs.com/guide/zh">https://www.rollupjs.com/guide/zh</a></p>
<p>基本概念:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Rollup 是一个 JavaScript 模块打包器，可以将小块代码编译成大块复杂的代码，例如 library 或应用程序。</span><br></pre></td></tr></table></figure>

<p>优势:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、静态分析</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、小巧而专一</span><br></pre></td></tr></table></figure>

<p>实战之打包流行库</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、写一个js库</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、使用rollup打包</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/23/project/" data-id="ckp19h1q00000p4io43yhcz9r" data-title="前端工程化之模块化" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-CSS" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/06/CSS/" class="article-date">
  <time class="dt-published" datetime="2021-05-06T08:17:29.545Z" itemprop="datePublished">2021-05-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/05/06/CSS/">CSS3</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="CSS3网站变灰代码"><a href="#CSS3网站变灰代码" class="headerlink" title="CSS3网站变灰代码"></a>CSS3网站变灰代码</h1><p>这里说说如何使网页变为黑白效果，所谓置灰。</p>
<p>网上各种方式都有 js css nginx 等，但万变不离其宗，都是使用 css3 grayscale 滤镜效果实现。</p>
<p>网上例子：<a target="_blank" rel="noopener" href="https://blog.jijian.link/2020-04-03/css3-filter-grayscale/example-grayscale.html">置灰效果</a> <a target="_blank" rel="noopener" href="https://blog.jijian.link/2020-04-03/css3-filter-grayscale/example-grayscale.html?filter=0">未置灰效果</a></p>
<h2 id="CSS-添加方式"><a href="#CSS-添加方式" class="headerlink" title="CSS 添加方式"></a>CSS 添加方式</h2><p>核心代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">  &#x2F;* FF4.0变色 *&#x2F;</span><br><span class="line">  filter: url(&quot;data:image&#x2F;svg+xml;utf8,&lt;svg%20xmlns&#x3D;\&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg\&#39;&gt;&lt;filter%20id&#x3D;\&#39;grayscale\&#39;&gt;&lt;feColorMatrix%20type&#x3D;\&#39;matrix\&#39;%20values&#x3D;\&#39;0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200\&#39;&#x2F;&gt;&lt;&#x2F;filter&gt;&lt;&#x2F;svg&gt;#grayscale&quot;);</span><br><span class="line">  &#x2F;* chrome 变色 *&#x2F;</span><br><span class="line">  -webkit-filter: grayscale(100%);</span><br><span class="line">  &#x2F;* firefox *&#x2F;</span><br><span class="line">  -moz-filter: grayscale(100%);</span><br><span class="line">  &#x2F;* edge *&#x2F;</span><br><span class="line">  -ms-filter: grayscale(100%);</span><br><span class="line">  &#x2F;* opera *&#x2F;</span><br><span class="line">  -o-filter: grayscale(100%);</span><br><span class="line">  &#x2F;* w3c *&#x2F;</span><br><span class="line">  filter: grayscale(100%);</span><br><span class="line">  &#x2F;* IE变色 *&#x2F;</span><br><span class="line">  filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale&#x3D;1);</span><br><span class="line">  -ms-filter: gray;</span><br><span class="line">  &#x2F;* IE9- *&#x2F;</span><br><span class="line">  filter: gray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="JS-添加方式"><a href="#JS-添加方式" class="headerlink" title="JS 添加方式"></a>JS 添加方式</h2><p>好处：可控制显示时间，比如下面代码，控制在 2020-04-04 00:00:00 到 2020-04-05 00:00:00 网页显示灰色效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 降半旗页面置灰</span><br><span class="line">if ((new Date()).getTime() &gt; 1585929600000 &amp;&amp; (new Date()).getTime() &lt; 1586016000000) &#123;</span><br><span class="line">  &#x2F;&#x2F; FF</span><br><span class="line">  document.body.style[&#39;filter&#39;] &#x3D; &#39;url(&quot;data:image&#x2F;svg+xml;utf8,&lt;svg%20xmlns&#x3D;\&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg\&#39;&gt;&lt;filter%20id&#x3D;\&#39;grayscale\&#39;&gt;&lt;feColorMatrix%20type&#x3D;\&#39;matrix\&#39;%20values&#x3D;\&#39;0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200\&#39;&#x2F;&gt;&lt;&#x2F;filter&gt;&lt;&#x2F;svg&gt;#grayscale&quot;)&#39;;</span><br><span class="line">  &#x2F;*IE变色*&#x2F;</span><br><span class="line">  document.body.style[&#39;filter&#39;] &#x3D; &#39;progid:DXImageTransform.Microsoft.BasicImage(grayscale&#x3D;1)&#39;;</span><br><span class="line">  document.body.style[&#39;filter&#39;] &#x3D; &#39;gray&#39;;</span><br><span class="line">  document.body.style[&#39;-ms-filter&#39;] &#x3D; &#39;gray&#39;;</span><br><span class="line">  &#x2F;*谷歌变色*&#x2F;</span><br><span class="line">  document.body.style[&#39;-webkit-filter&#39;] &#x3D; &#39;grayscale(100%)&#39;;</span><br><span class="line">  document.body.style[&#39;-moz-filter&#39;] &#x3D; &#39;grayscale(100%)&#39;;</span><br><span class="line">  document.body.style[&#39;-ms-filter&#39;] &#x3D; &#39;grayscale(100%)&#39;;</span><br><span class="line">  document.body.style[&#39;-o-filter&#39;] &#x3D; &#39;grayscale(100%)&#39;;</span><br><span class="line">  document.body.style[&#39;filter&#39;] &#x3D; &#39;grayscale(100%)&#39;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="nginx-添加方式"><a href="#nginx-添加方式" class="headerlink" title="nginx 添加方式"></a>nginx 添加方式</h2><ol>
<li><p>重新编译 nginx，增加 http_sub_module 模块。</p>
<p>可使用 <code>nginx -V</code> 查看 nginx 已有模块。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># nginx -V</span><br><span class="line">nginx version: nginx&#x2F;1.12.2</span><br><span class="line">built by gcc 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.9) </span><br><span class="line">built with OpenSSL 1.0.2l  25 May 2017</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">configure arguments: --user&#x3D;www --group&#x3D;www --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --with-http_stub_status_module --with-http_ssl_module --with-http_v2_module --with-http_gzip_static_module --with-ipv6 --with-http_sub_module --with-openssl&#x3D;&#x2F;usr&#x2F;local&#x2F;lnmp1.4-full&#x2F;src&#x2F;openssl-1.0.2l</span><br></pre></td></tr></table></figure>

<p>查看 configure arguments 是否有 <strong>–with-http_sub_module</strong> ，如果已有，则不需要重新编译。</p>
</li>
<li><p>在 nginx.conf 配置文件增加以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">  # 在 http 模块开启 sub filter</span><br><span class="line">  sub_filter_once on;</span><br><span class="line">  server &#123;</span><br><span class="line">    # 在 server 模块，添加配置</span><br><span class="line">    sub_filter  &#39;&lt;&#x2F;head&gt;&#39;  &#39;&lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;body &#123;</span><br><span class="line">      filter: url(&quot;data:image&#x2F;svg+xml;utf8,&lt;svg%20xmlns&#x3D;\&#39;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg\&#39;&gt;&lt;filter%20id&#x3D;\&#39;grayscale\&#39;&gt;&lt;feColorMatrix%20type&#x3D;\&#39;matrix\&#39;%20values&#x3D;\&#39;0.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200.3333%200.3333%200.3333%200%200%200%200%200%201%200\&#39;&#x2F;&gt;&lt;&#x2F;filter&gt;&lt;&#x2F;svg&gt;#grayscale&quot;);</span><br><span class="line">      -webkit-filter: grayscale(100%);</span><br><span class="line">      -moz-filter: grayscale(100%);</span><br><span class="line">      -ms-filter: grayscale(100%);</span><br><span class="line">      -o-filter: grayscale(100%);</span><br><span class="line">      filter: grayscale(100%);</span><br><span class="line">      filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale&#x3D;1);</span><br><span class="line">      -ms-filter: gray;</span><br><span class="line">      filter: gray;</span><br><span class="line">    &#125;&lt;&#x2F;style&gt;&lt;&#x2F;head&gt;&#39;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>其原理还是在 head 前面新增 css 样式。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/06/CSS/" data-id="ckoco3yv70000qkiog6zw4mki" data-title="CSS3" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-node" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/21/node/" class="article-date">
  <time class="dt-published" datetime="2021-04-21T12:45:08.448Z" itemprop="datePublished">2021-04-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/21/node/">Node.js 子进程学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Node-js-子进程"><a href="#Node-js-子进程" class="headerlink" title="Node.js 子进程"></a>Node.js 子进程</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h2><p><a target="_blank" rel="noopener" href="http://nodejs.cn/api/child_process.html">中文文档</a></p>
<p>通过利用nodejs的子进程模块(child_process)我们可以轻松调用外部程序、命令等。</p>
<h2 id="2-API"><a href="#2-API" class="headerlink" title="2.API"></a>2.API</h2><p>一般习惯用异步方式调用，子进程共有4个异步方法：</p>
<ul>
<li>child_process.exec()</li>
<li>child_process.execFile()</li>
<li>child_process.spawn()</li>
<li>child_process.fork()</li>
</ul>
<p>需要知道的是，<code>exec()</code>、<code>execFile()</code>、<code>fork()</code>3个方法底层都是通过<code>.spawn()</code>实现的，所以<code>spawn()</code>才是终极玩法。</p>
<h3 id="2-1-child-process-exec"><a href="#2-1-child-process-exec" class="headerlink" title="2.1. child_process.exec()"></a>2.1. child_process.exec()</h3><p>衍生一个 shell，然后在 shell 中执行 command，且缓冲任何产生的输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">child_process.exec(command[, options][, callback])</span><br></pre></td></tr></table></figure>

<ul>
<li>command：要运行的命令以及参数，命令和参数之间用空格分隔，如<code>nginx -s reload</code>；</li>
<li>options：可选的选项，常见有：<code>encoding</code>、<code>maxBuffer</code>等，具体看文档；</li>
<li>callback：回调，有3个参数：error, stdout, stderr，会在子进程完全结束时才会触发；</li>
</ul>
<p><code>exec</code>、<code>execFile</code>和<code>spawn</code>最大的区别是前面2个有回调函数，后者没有，exec（包括execFile，下同）会把所有输出合并起来，然后等结束时一次性输出，而<code>spawn</code>可以实时监听输出，为了防止输出数据太大，所以exec有一个maxBuffer参数。二者另外一个区别就是编码的问题，具体后面有例子讲解。</p>
<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  重新加载nginx配置文件</span></span><br><span class="line"><span class="keyword">const</span> &#123;exec&#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line">execFile(<span class="string">&#x27;nginx -s reload&#x27;</span>, <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(error) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(<span class="string">`exec error: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-2-child-process-execFile"><a href="#2-2-child-process-execFile" class="headerlink" title="2.2. child_process.execFile()"></a>2.2. child_process.execFile()</h3><p><code>execFile</code>和<code>exec</code>很类似，二者的主要区别是：</p>
<ul>
<li><code>execFile</code>不用先衍生一个 shell，它指定可执行的<code>file</code>直接衍生为一个新进程，这使得它比<code>exec()</code>更高效；</li>
<li><code>execFile</code>将命令和参数分开，<code>exec</code>是合在一起的。</li>
</ul>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">child_process.execFile(file[, args][, options][, callback])</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  重新加载nginx配置文件</span></span><br><span class="line"><span class="keyword">const</span> &#123;execFile&#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line">execFile(<span class="string">&#x27;nginx&#x27;</span>, [<span class="string">&#x27;-s&#x27;</span>, <span class="string">&#x27;reload&#x27;</span>], <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(error) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(<span class="string">`exec error: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>对于回调函数，默认情况下，Node.js 会解码输出为 UTF-8，并将字符串传给回调。 encoding 选项可用于指定用于解码 stdout 和 stderr 输出的字符编码。 如果 encoding 是 <code>buffer</code>、或一个无法识别的字符编码，则传入 Buffer 对象到回调函数。</p>
<h3 id="2-3-child-process-spawn"><a href="#2-3-child-process-spawn" class="headerlink" title="2.3. child_process.spawn()"></a>2.3. child_process.spawn()</h3><p>作用：使用给定的<code>command</code>和<code>args</code>来衍生一个新进程。 如果省略 args，则默认为一个空数组。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">child_process.spawn(command[, args][, options])</span><br></pre></td></tr></table></figure>

<p>示例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;spawn&#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> childProcess = spawn(<span class="string">&#x27;nginx&#x27;</span>, [<span class="string">&#x27;-s&#x27;</span>, <span class="string">&#x27;reload&#x27;</span>]);</span><br><span class="line">childProcess.stdout.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stdout: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">childProcess.stderr.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stderr: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">childProcess.on(<span class="string">&#x27;close&#x27;</span>, <span class="function">(<span class="params">code</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`子进程退出码：<span class="subst">$&#123;code&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="Windows平台一些问题"><a href="#Windows平台一些问题" class="headerlink" title="Windows平台一些问题"></a>Windows平台一些问题</h1><h2 id="3-1-Windows上运行bat或者cmd文件"><a href="#3-1-Windows上运行bat或者cmd文件" class="headerlink" title="3.1. Windows上运行bat或者cmd文件"></a>3.1. Windows上运行bat或者cmd文件</h2><blockquote>
<p>随着操作系统的不同，<code>child_process.exec()</code>和<code>child_process.execFile()</code>会有一个重大区别，在类 Unix 操作系统上（Unix、 Linux、 macOS），<code>child_process.execFile()</code>效率更高，因为很多命令的执行不需要借助<code>shell</code>，但是在<code>Windows</code>上，<code>.bat</code> 和 <code>.cmd</code> 文件在没有终端的情况下是不可执行的，因此不能使用 <code>child_process.execFile()</code> 启动。 当在 Windows 下运行时，要调用 .bat 和 .cmd 文件，必须主动传入<code>cmd.exe</code>。</p>
</blockquote>
<p>以上话是从官方文档摘抄的，但是不知为何我测试的结果不是这样的。</p>
<p>测试文件<code>test.bat</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line">echo HelloWorld！</span><br><span class="line">echo first params: %1</span><br><span class="line">echo second params: %2</span><br></pre></td></tr></table></figure>

<p>测试文件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;exec, execFile, spawn&#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> childProcess = spawn(<span class="string">&#x27;test.bat&#x27;</span>, [<span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;b1&#x27;</span>]);</span><br><span class="line">childProcess.stdout.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stdout: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">childProcess.stderr.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stderr: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">childProcess.on(<span class="string">&#x27;close&#x27;</span>, <span class="function">(<span class="params">code</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`子进程退出码：<span class="subst">$&#123;code&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">exec(<span class="string">&#x27;test.bat a2 b2&#x27;</span>, <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(error) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(<span class="string">`exec error: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">execFile(<span class="string">&#x27;test.bat&#x27;</span>, [<span class="string">&#x27;a3&#x27;</span>, <span class="string">&#x27;b3&#x27;</span>], <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(error) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(<span class="string">`exec error: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<p><img src="http://image.liuxianan.com/201706/20170615_215604_038_6766.png" alt="img"></p>
<p>可以发现，我没有使用<code>cmd.exe</code>也可以直接运行bat文件，所以有点郁闷，当然，像下面这样也是可以的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> childProcess = spawn(<span class="string">&#x27;cmd.exe&#x27;</span>, [<span class="string">&#x27;/c&#x27;</span>, <span class="string">&#x27;test.bat&#x27;</span>, <span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;b1&#x27;</span>]);</span><br><span class="line">childProcess.stdout.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stdout: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line">childProcess.stderr.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`stderr: <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="3-2-Windows下直接执行cmd命令"><a href="#3-2-Windows下直接执行cmd命令" class="headerlink" title="3.2. Windows下直接执行cmd命令"></a>3.2. Windows下直接执行cmd命令</h2><p>例如，新建一个名为<code>test</code>的文件夹：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">exec(<span class="string">&#x27;mkdir test&#x27;</span>, <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span>(error) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(<span class="string">`exec error: <span class="subst">$&#123;error&#125;</span>`</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>不知为何，网上都说要借助一个<code>node-cmd</code>的模块，貌似不用借助第三方模块就可以直接调用 Windows 的命令（ Linux 的 shell 当然就更不在话下了）。</p>
<h2 id="3-3-关于乱码问题"><a href="#3-3-关于乱码问题" class="headerlink" title="3.3. 关于乱码问题"></a>3.3. 关于乱码问题</h2><p>还是上面的<code>nginx -s reload</code>示例，当使用<code>exec</code>时，输出结果类似乱码（反正不正常），当使用<code>spawn</code>时一切正常，而且由于<code>exec</code>存在<code>maxBuffer</code>的问题，所以一般建议不怕麻烦的话优先使用<code>spawn</code>。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/21/node/" data-id="cknrgriat00008kio7dus4ggx" data-title="Node.js 子进程学习" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-electron" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/08/electron/" class="article-date">
  <time class="dt-published" datetime="2021-04-08T12:48:08.001Z" itemprop="datePublished">2021-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/08/electron/">Electron 开发</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Electron-开发环境搭建"><a href="#Electron-开发环境搭建" class="headerlink" title="Electron 开发环境搭建"></a>Electron 开发环境搭建</h1><h2 id="一、前提条件"><a href="#一、前提条件" class="headerlink" title="一、前提条件"></a>一、前提条件</h2><ul>
<li>在使用 Electron 之前，您需要安装 Node.js。(这里我就不详细讲解了)</li>
<li>要检查 Node.js 安装是否正确，请在您的终端客户端输入<code>node-v</code>和<code>npm -v</code>命令,它们会相应地打印 Node.js 和 npm 的版本。 如果两个命令都成功，您就可以安装 Electron 了。</li>
</ul>
<h2 id="二、创建基础的应用程序"><a href="#二、创建基础的应用程序" class="headerlink" title="二、创建基础的应用程序"></a>二、创建基础的应用程序</h2><p>Electron 应用程序的基本结构：<br><img src="https://cdn.jsdelivr.net/gh/wang-boss/PicGO/ImgSnipaste_2020-12-18_11-07-13.png"><br>dist：项目打包生成的文件夹。<br>node_modules:npm 安装的项目依赖。<br>index.html:应用程序初始化后您想要显示的页面。<br>index.js:创建窗口并处理系统事件。<br>package.json: 是我们应用程序的启动脚本。它将在主进程中运行，并包含有关应用程序的所有信息。</p>
<ol>
<li>创建项目，为项目安装 Electron</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ElectronDemo</span><br><span class="line">cd ElectronDemo</span><br><span class="line">npm init -y				(会自动生成package.json文件)</span><br><span class="line">cnpm install -g electron   (全局安装electron)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建主脚本文件(index.js)</li>
</ol>
<ul>
<li>主脚本指定了您将运行主进程的 Electron 应用程序的入口点。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const &#123; app,BrowserWindow &#125; &#x3D; require(&#39;electron&#39;)</span><br><span class="line">function createWindow () &#123;</span><br><span class="line">	const win &#x3D; new BrowserWindow(&#123;</span><br><span class="line">    	width:800,</span><br><span class="line">        height:600,</span><br><span class="line">        webPreferences:&#123;</span><br><span class="line">        	contextIsolation:true,</span><br><span class="line">            nodeIntegration: true</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  mainWindow.loadFile(&quot;index.html&quot;);</span><br><span class="line">  mainWindow.on(&quot;closed&quot;, function () &#123;</span><br><span class="line">    mainWindow &#x3D; null;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">app.on(&quot;ready&quot;, function () &#123;</span><br><span class="line">  createWindow();</span><br><span class="line">&#125;);</span><br><span class="line">app.on(&quot;window-all-closed&quot;, function () &#123;</span><br><span class="line">  if (process.platform !&#x3D;&#x3D; &quot;darwin&quot;) &#123;</span><br><span class="line">    app.quit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(&quot;activate&quot;, function () &#123;</span><br><span class="line">  if (mainWindow &#x3D;&#x3D;&#x3D; null) &#123;</span><br><span class="line">    createWindow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>创建网页(index.html)</li>
</ol>
<ul>
<li>index.html 是页面初始化所显示的页面</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang&#x3D;&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;</span><br><span class="line">    &lt;title&gt;Hello World&lt;&#x2F;title&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h1&gt;helloworld&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>修改初始化的 package.json</li>
</ol>
<ul>
<li>初始化的 package.json：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;ElectronDemo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [],</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>修改后的 package.json:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Electronemo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;electron .&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keywords&quot;: [],</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>运行应用程序项目</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>

<h1 id="Electron-项目更新"><a href="#Electron-项目更新" class="headerlink" title="Electron 项目更新"></a>Electron 项目更新</h1><h2 id="添加自动更新功能"><a href="#添加自动更新功能" class="headerlink" title="添加自动更新功能"></a>添加自动更新功能</h2><p>1.现在我们有了一个可以正常工作的应用程序，我们可以添加自动更新功能了。在 main.js 中，从 electron-updater 导入”autoUpdater”：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123;autoUpdater&#125; &#x3D; require(&#39;electron-updater&#39;)</span><br></pre></td></tr></table></figure>

<p>2.在该 app.on()里的 createWindow() 后，添加以下代码以检查主窗口就绪后是否有任何可用的更新。如果有，它们将自动下载：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">autoUpdater.checkForUpdatesAndNotify();</span><br></pre></td></tr></table></figure>

<p>3.在 main.js 的末尾，添加以下事件侦听器以处理更新事件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">autoUpdater.on(&#39;update-available&#39;,()&#x3D;&gt; &#123;</span><br><span class="line">mainWindow.webContents.send(&#39;update_available&#39;);</span><br><span class="line">&#125;);</span><br><span class="line">autoUpdater.on(&#39;update-downloaded&#39;,()&#x3D;&gt; &#123;</span><br><span class="line">mainWindow.webContents.send(&#39;update_downloaded&#39;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>4.当有新的更新可用时，我们将向主窗口发送一条消息，通知用户更新。下载完成后，我们将发送另一条消息，通知他们退出应用程序时将安装更新。<br>让我们更新 index.html 以显示这些通知。在脚本标记之前，将 div 添加到主体：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id &#x3D;&quot;notification&quot; class &#x3D;&quot;hidden&quot;&gt; </span><br><span class="line">  &lt;p id &#x3D;&quot;message&quot;&gt; &lt;&#x2F;p&gt; </span><br><span class="line">  &lt;button id &#x3D;&quot;close-button&quot; onClick &#x3D;&quot;closeNotification()&quot;&gt;</span><br><span class="line">    close</span><br><span class="line">  &lt;&#x2F;button&gt; </span><br><span class="line">  &lt;button id &#x3D;&quot;restart-button&quot; onClick &#x3D;&quot;restartApp()&quot; class &#x3D;&quot;hidden&quot;&gt;</span><br><span class="line">    Restart</span><br><span class="line">  &lt;&#x2F;button&gt; </span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<p>5.在样式标签中添加此CSS以提供我们的通知样式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#notification &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 20px;</span><br><span class="line">  left: 20px;</span><br><span class="line">  width: 200px;</span><br><span class="line">  padding: 20px;</span><br><span class="line">  border-radius: 5px;</span><br><span class="line">  background-color: white;</span><br><span class="line">  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);</span><br><span class="line">&#125;</span><br><span class="line">.hidden &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6.在 script 标签中添加以下代码用来监听和显示通知：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const notification &#x3D; document.getElementById(&#39;notification&#39;);</span><br><span class="line">const message &#x3D; document.getElementById(&#39;message&#39;);</span><br><span class="line">const restartButton &#x3D; document.getElementById(&#39;restart-button&#39;);</span><br><span class="line">ipcRenderer.on(&#39;update_available&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  ipcRenderer.removeAllListeners(&#39;update_available&#39;);</span><br><span class="line">  message.innerText &#x3D; &#39;A new update is available. Downloading now...&#39;;</span><br><span class="line">  notification.classList.remove(&#39;hidden&#39;);</span><br><span class="line">&#125;);</span><br><span class="line">ipcRenderer.on(&#39;update_downloaded&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  ipcRenderer.removeAllListeners(&#39;update_downloaded&#39;);</span><br><span class="line">  message.innerText &#x3D; &#39;Update Downloaded. It will be installed on restart. Restart now?&#39;;</span><br><span class="line">  restartButton.classList.remove(&#39;hidden&#39;);</span><br><span class="line">  notification.classList.remove(&#39;hidden&#39;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>7.添加以下功能来处理关闭通知，并重新启动应用程序以立即安装下载的更新：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function closeNotification() &#123;</span><br><span class="line">  notification.classList.add(&#39;hidden&#39;);</span><br><span class="line">&#125;</span><br><span class="line">function restartApp() &#123;</span><br><span class="line">  ipcRenderer.send(&#39;restart_app&#39;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>8.最后在 main.js 添加以下代码，如果用户选择“重新启动“，该事件侦听器将安装新版本：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ipcMain.on(&#39;restart_app&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  autoUpdater.quitAndInstall();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>9.之后要准备使用 Electron-builder 打包我们的 App,因此我们需要创建一个文件”electron-builder.yml”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">appId: com.example.ElectronAutoUpdate(需要更改)</span><br><span class="line">publish:</span><br><span class="line">  provider: github</span><br><span class="line">  token: [YOUR GITHUB ACCESS TOKEN]</span><br></pre></td></tr></table></figure>
<p>“appId”标识您的应用，可以自由选择。“publish”部分指定我们要使用GitHub Releases部署我们的应用程序。为了使电子构建者能够从命令行创建发布，我们需要提供个人访问令牌。您可以按照<a target="_blank" rel="noopener" href="https://docs.github.com/en/github/authenticating-to-github/creating-a-personal-access-token">此处</a>的说明创建一个。</p>
<blockquote>
<p>在提交任何代码之前，请确保您创建了一个“.gitignore”文件并添加 electron-builder.yml 到该文件中。您要发布您的应用程序，而不是您的访问令牌。或者，您可以将令牌放在“electron-builder.yml”之外，并设置 GH_TOKEN 环境变量。</p>
</blockquote>
<p>10.在 GitHub 上，为您的软件创建一个存储库。然后，您可以在 package.json 中添加如下代码，以便电子构建器知道在哪里发布发行版</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;repository&quot;: &#123;</span><br><span class="line">  &quot;type&quot; : &quot;git&quot;,</span><br><span class="line">  &quot;url&quot; : &quot;https:&#x2F;&#x2F;github.com&#x2F;[YOUR USERNAME]&#x2F;[YOUR REPO NAME].git&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>11.初始化 git 并 remote 至刚刚创建的远程仓库。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin https:&#x2F;&#x2F;github.com&#x2F;[YOUR USERNAME]&#x2F;[YOUR REPO NAME].git</span><br></pre></td></tr></table></figure>
<p>12.在 package.json 文件中的script里添加如下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;build&quot;: &quot;electron-builder build  --win --publish never&quot;,</span><br><span class="line">&quot;deploy&quot;: &quot;electron-builder build  --win --publish always&quot;</span><br></pre></td></tr></table></figure>
<p>在运行部署 script 之前，我们需要将源代码推送到 GitHub。如果存储库为空，则不会显示发布。将” node_modules”和”dist”（放置打包代码的目录）添加到您的 .gitignore 文件中，然后提交其余代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;Create auto-updating app&quot;</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>

<p>部署应用<br>我们准备将我们的应用程序部署到 GitHub Releases。让我们运行”deploy” script：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run deploy</span><br></pre></td></tr></table></figure>
<p>完成后，转到 GitHub 上的存储库，然后单击“发布”选项卡。您会看到这样的草稿版本：<br><img src="https://cdn.jsdelivr.net/gh/Letmeouted/Picture/My/Snipaste_2021-04-08_22-03-45.png"><br>单击“Edit”，然后单击“Publish release”完成发行。<br><img src="https://cdn.jsdelivr.net/gh/Letmeouted/Picture/My/Snipaste_2021-04-08_22-05-55.png"><br>您可以在“Assets”下下载dmg或exe安装程序，然后安装该应用程序的正式版。<br><img src="https://cdn.jsdelivr.net/gh/Letmeouted/Picture/My/Snipaste_2021-04-08_22-03-45.png"><br>测试自动更新<br>为了测试自动更新，我们将发布一个新版本。我们要做的就是增加package.json中的版本号：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;version&quot;: &quot;1.0.1&quot;</span><br></pre></td></tr></table></figure>
<p>尽管您这次不必推送代码，但是我要这样做，以便我们在代码中所做的更改与新版本相关联：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m &quot;Version 1.0.1 update&quot;</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<p>现在<code>npm run deploy</code>再次运行，<code>electron-builder</code>将在 GitHub 版本上创建一个新的草案版本。像我们刚才那样发布该版本。这次，不要下载安装程序，只需运行先前安装的应用程序即可。我们将收到以下通知：<br><img src="https://cdn.jsdelivr.net/gh/Letmeouted/Picture/My/Snipaste_2021-04-08_22-09-41.png"><br>几秒钟后，我们将获得以下信息：<br><img src="https://cdn.jsdelivr.net/gh/Letmeouted/Picture/My/Snipaste_2021-04-08_22-09-57.png"><br>单击“Restart”，该应用将重新启动。完成后，版本号现在将显示为1.0.1。</p>
<h1 id="Electron-项目打包"><a href="#Electron-项目打包" class="headerlink" title="Electron 项目打包"></a>Electron 项目打包</h1><ol>
<li>在项目中运行如下命令：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install electron-builder --save-dev</span><br></pre></td></tr></table></figure></li>
<li>添加package.json中的<code>scripts</code>里面添加如下代码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;dist&quot;:&quot;electron-builder --win --ia32&quot;</span><br></pre></td></tr></table></figure></li>
<li>执行对项目进行打包，输出到dist文件夹。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run dist</span><br></pre></td></tr></table></figure>
最后便可以得到已经打包好的可执行文件和安装包</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://github.com/Letmeouted/Update">源代码地址</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/08/electron/" data-id="ckn8vlr850000esiohiecaxm7" data-title="Electron 开发" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/08/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-04-08T12:18:46.358Z" itemprop="datePublished">2021-04-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/08/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start !"></a>Quick Start !</h2><p>helloworld!<br>(你好世界)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#39;helloworld&#39;) </span><br></pre></td></tr></table></figure>
<h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/08/hello-world/" data-id="cklpz5zfa0000lsmb2aex4za1" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/06/22/Eslint%20and%20pm2/">Eslint and pm2</a>
          </li>
        
          <li>
            <a href="/2021/06/06/Jquery(1)/">Jquery</a>
          </li>
        
          <li>
            <a href="/2021/05/23/project/">前端工程化之模块化</a>
          </li>
        
          <li>
            <a href="/2021/05/06/CSS/">CSS3</a>
          </li>
        
          <li>
            <a href="/2021/04/21/node/">Node.js 子进程学习</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>